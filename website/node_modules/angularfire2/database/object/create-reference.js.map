{"version":3,"sources":["../../../../src/database/object/create-reference.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,2BAA2B,EAAE,MAAM,oBAAoB,CAAC;AAEjE,MAAM,gCAAmC,KAAoB;IAC3D,MAAM,CAAC;QACL,KAAK,OAAA;QACL,eAAe,EAAE,2BAA2B,CAAC,KAAK,CAAC;QACnD,MAAM,YAAC,IAAgB,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAkB,CAAC,CAAC,CAAC;QAC5E,GAAG,YAAC,IAAO,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAkB,CAAC,CAAC,CAAC;QAC7D,MAAM,gBAAK,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAmB,CAAC,CAAC,CAAC;QACxD,YAAY,EAAZ;YACE,MAAM,CAAC,2BAA2B,CAAC,KAAK,CAAC,EAAE;iBACxC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAO,CAAC,CAAC,CAAC,IAAI,EAA1D,CAA0D,CAAC,CAAA;QAC9E,CAAC;KACF,CAAA;AACH,CAAC","file":"create-reference.js","sourceRoot":"","sourcesContent":["import { DatabaseQuery, AngularFireObject } from '../interfaces';\nimport { createObjectSnapshotChanges } from './snapshot-changes';\n\nexport function createObjectReference<T>(query: DatabaseQuery): AngularFireObject<T> {\n  return {\n    query,\n    snapshotChanges: createObjectSnapshotChanges(query),\n    update(data: Partial<T>) { return query.ref.update(data) as Promise<void>; },\n    set(data: T) { return query.ref.set(data) as Promise<void>; },\n    remove() { return query.ref.remove() as Promise<void>; },\n    valueChanges<T>() { \n      return createObjectSnapshotChanges(query)()\n        .map(action => action.payload.exists() ? action.payload.val() as T : null)\n    },\n  }\n}\n"]}